server {
    listen 80;
    server_name erimkaur.com www.erimkaur.com;

    # Landing page
    root /var/www/erimkaur;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }

    # Brand Shield â reverse proxy to Render
    location /shield/ {
        proxy_pass https://brand-shield.onrender.com/;
        proxy_set_header Host brand-shield.onrender.com;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_ssl_server_name on;
        proxy_redirect https://brand-shield.onrender.com/ /shield/;
        sub_filter 'href="/' 'href="/shield/';
        sub_filter 'src="/' 'src="/shield/';
        sub_filter 'action="/' 'action="/shield/';
        sub_filter "fetch('/" "fetch('/shield/";
        sub_filter 'fetch("/' 'fetch("/shield/';
        sub_filter "href='/login'" "href='/shield/login'";
        sub_filter "window.location.href = '/login'" "window.location.href = '/shield/login'";
        sub_filter_once off;
        sub_filter_types text/html application/javascript;
    }
}
